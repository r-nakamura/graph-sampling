#!/usr/bin/env python3

import fileinput
import graph_tools
import graph_sampling
from perlcompat import getopts

def main():
    opts = getopts('d:i:o:p:s:t:')
    directed = opts.d if opts.d else False
    p = float(opts.p) if opts.p else 0.1
    seed = int(opts.s) if opts.s else None
    if seed:
        random.seed(seed)
    in_fmt = opts.i if opts.i else 'dot'
    out_fmt = opts.o if opts.o else 'dot'
    G = graph_tools.Graph(directed=directed)
    G.import_graph(in_fmt, list(fileinput.input()))
    sampler = graph_sampling.create_sampler(opts.t, G)
    Gs = sampler.sample(p)
    print(Gs.export_graph(out_fmt), end='')

if __name__ == "__main__":
    main()
